<div class="app-container">
  <aside class="sidebar" id="mySidebar">
    <nav class="sidebar-nav">
      <!-- placeholder stuff -->
      <div class="nav-section">
        <h2 class="section-title">Subjects</h2>
        <ul class="nav-list">
          <li class="nav-item">
            <span class="nav-icon">ğŸ“š</span>
            <span>Mathematics</span>
          </li>
          <li class="nav-item">
            <span class="nav-icon">ğŸ§¬</span>
            <span>Biology</span>
          </li>
          <li class="nav-item">
            <span class="nav-icon">âš¡</span>
            <span>Physics</span>
          </li>
          <li class="nav-item">
            <span class="nav-icon">ğŸ§ª</span>
            <span>Chemistry</span>
          </li>
        </ul>
      </div>

      <!-- Study Materials -->
      <div class="nav-section">
        <h2 class="section-title">Study Materials</h2>
        <ul class="nav-list">
          <li class="nav-item">
            <span class="nav-icon">ğŸ“</span>
            <span>Flashcards</span>
          </li>
          <li class="nav-item">
            <span class="nav-icon">ğŸ“„</span>
            <span>Notes</span>
          </li>
          <li class="nav-item">
            <span class="nav-icon">ğŸ“‘</span>
            <span>Summaries</span>
          </li>
        </ul>
      </div>

      <!-- Recent Uploads -->
      <div class="nav-section">
        <h2 class="section-title">Recent Uploads</h2>
        <ul class="nav-list">
          <li class="nav-item">
            <span class="nav-icon">ğŸ“</span>
            <span>Physics_HW1.pdf</span>
          </li>
          <li class="nav-item">
            <span class="nav-icon">ğŸ“</span>
            <span>Bio_Chapter3.pdf</span>
          </li>
        </ul>
      </div>
    </nav>
  </aside>

  <main class="main" id="main">
    <div class="header">
      <button class="openbtn" (click)="openNav()">â˜°</button>
      <h1 class="header-title">Flashy</h1>
    </div>
    <div class="messages-container">
      <div class="scroller-content">
        <div
          class="message-wrapper"
          *ngFor="let msg of chronologicalMessages"
          [ngClass]="msg.type === 'sent' ? 'sent-wrapper' : 'received-wrapper'"
        >
          <span class="timestamp" *ngIf="msg.type === 'sent'">
            <div class="time">{{ msg.timestamp | date : "h:mm a" }}</div>
            <div class="date">{{ msg.timestamp | date : "MMM d, y" }}</div>
          </span>

          <div
            class="message"
            [ngClass]="
              msg.type === 'sent' ? 'sent-message' : 'received-message'
            "
          >
            <!-- For sent messages -->
            <div *ngIf="msg.type === 'sent'">{{ msg.text }}</div>

            <!-- For received messages with flashcards -->
            <div *ngIf="msg.type === 'received'" class="flashcard-container">
              <ng-container *ngIf="msg.flashcards">
                <div class="flashcard-pair" *ngFor="let card of msg.flashcards">
                  <div class="question" [innerHTML]="card.question"></div>
                  <div class="answer" [innerHTML]="card.answer"></div>
                </div>
              </ng-container>
              <div *ngIf="!msg.flashcards" [innerHTML]="msg.text"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="input-section">
      <div class="input-wrapper">
        <input
          type="text"
          class="message-input"
          placeholder="Type your message..."
          [(ngModel)]="message"
          (keydown.enter)="sendMessage($event)"
        />
        <button
          class="send-button"
          type="submit"
          title="Send message"
          (click)="sendMessage($event)"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            fill="currentColor"
            viewBox="0 0 24 24"
            class="send-icon"
          >
            <path d="M4 20l16-8L4 4v6l10 2-10 2z" />
          </svg>
        </button>
      </div>

      <label for="file-upload" class="upload-button">
        <span>Upload</span>
        <input type="file" id="file-upload" class="file-input" />
      </label>
    </div>
  </main>
</div>
